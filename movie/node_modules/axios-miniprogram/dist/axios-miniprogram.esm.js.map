{"version":3,"file":"axios-miniprogram.esm.js","sources":["../src/request/cancel.ts","../src/request/createError.ts","../src/constants/methods.ts","../src/helpers/types.ts","../src/helpers/error.ts","../src/helpers/ensureObject.ts","../src/helpers/dynamicURL.ts","../src/helpers/deepMerge.ts","../src/helpers/ignore.ts","../src/request/flattenHeaders.ts","../src/request/transformData.ts","../src/helpers/buildURL.ts","../src/helpers/isAbsoluteURL.ts","../src/helpers/combineURL.ts","../src/helpers/transformURL.ts","../src/request/generateType.ts","../src/request/request.ts","../src/request/dispatchRequest.ts","../src/core/InterceptorManager.ts","../src/core/MiddlewareManager.ts","../src/core/mergeConfig.ts","../src/core/Axios.ts","../src/core/createInstance.ts","../src/adpater/createAdapter.ts","../src/adpater/getDefaultAdapter.ts","../src/defaults.ts","../src/version.ts","../src/axios.ts"],"sourcesContent":["export interface CancelAction {\n  /**\n   * 取消信息\n   */\n  (message?: string): void;\n}\n\nexport interface CancelExecutor {\n  (cancel: CancelAction): void;\n}\n\nexport interface CancelTokenSource {\n  /**\n   * 取消令牌\n   */\n  token: CancelToken;\n  /**\n   * 取消函数\n   */\n  cancel: CancelAction;\n}\n\nexport interface CancelTokenConstructor {\n  new (executor: CancelExecutor): CancelToken;\n  source(): CancelTokenSource;\n}\n\nexport class Cancel {\n  message?: string;\n\n  constructor(message?: string) {\n    this.message = message;\n  }\n\n  toString(): string {\n    const message = this.message ? `: ${this.message}` : '';\n\n    return `Cancel${message}`;\n  }\n}\n\nexport function isCancel(value: unknown): value is Cancel {\n  return value instanceof Cancel;\n}\n\nexport class CancelToken {\n  #reason?: Cancel;\n\n  /**\n   * @internal\n   */\n  onCancel: Promise<Cancel>['then'];\n\n  constructor(executor: CancelExecutor) {\n    let action!: CancelAction;\n    const promise = new Promise<Cancel>((resolve) => {\n      action = (message) => {\n        if (this.#reason) {\n          return;\n        }\n\n        this.#reason = new Cancel(message);\n\n        resolve(this.#reason);\n      };\n    });\n\n    this.onCancel = promise.then.bind(promise);\n\n    executor(action);\n  }\n\n  static source(): CancelTokenSource {\n    let cancel!: CancelAction;\n    const token = new CancelToken((action) => {\n      cancel = action;\n    });\n\n    return {\n      token,\n      cancel,\n    };\n  }\n\n  /**\n   * @internal\n   */\n  throwIfRequested(): void {\n    if (this.#reason) {\n      throw this.#reason;\n    }\n  }\n}\n\nexport function isCancelToken(value: unknown): value is CancelToken {\n  return value instanceof CancelToken;\n}\n","import { AxiosAdapterPlatformTask } from '../adpater/createAdapter';\nimport {\n  AxiosRequestConfig,\n  AxiosResponse,\n  AxiosResponseError,\n} from '../core/Axios';\n\nexport type AxiosErrorResponse = AxiosResponse | AxiosResponseError;\n\nclass AxiosError extends Error {\n  config: AxiosRequestConfig;\n  request: AxiosAdapterPlatformTask;\n  response: AxiosErrorResponse;\n\n  constructor(\n    message: string,\n    config: AxiosRequestConfig,\n    response: AxiosErrorResponse,\n    request: AxiosAdapterPlatformTask,\n  ) {\n    super(message);\n    this.config = config;\n    this.request = request;\n    this.response = response;\n  }\n}\n\nexport function createError(\n  message: string,\n  config: AxiosRequestConfig,\n  response: AxiosErrorResponse,\n  request: AxiosAdapterPlatformTask,\n) {\n  return new AxiosError(message, config, response, request);\n}\n\nexport function isAxiosError(value: unknown): value is AxiosError {\n  return value instanceof AxiosError;\n}\n","/**\n * 普通的请求方法名称\n */\nexport const PLAIN_METHODS = ['options', 'trace', 'connect'] as const;\n\n/**\n * 带参数的请求方法名称\n */\nexport const WITH_PARAMS_METHODS = ['head', 'get', 'delete'] as const;\n\n/**\n * 带数据的请求方法名称\n */\nexport const WITH_DATA_METHODS = ['post', 'put', 'patch'] as const;\n\n/**\n * 可以携带 data 的请求方法\n */\nexport const WITH_DATA_RE = new RegExp(\n  `^(${WITH_DATA_METHODS.join('|')})`,\n  'i',\n);\n","const _toString = Object.prototype.toString;\n\nexport function isNull(value: any): value is null {\n  return value === null;\n}\n\nexport function isUndefined(value: any): value is undefined {\n  return typeof value === 'undefined';\n}\n\nexport function isString(value: any): value is string {\n  return (\n    typeof value === 'string' || _toString.call(value) === '[object String]'\n  );\n}\n\nexport function isPlainObject<T extends AnyObject>(value: any): value is T {\n  return _toString.call(value) === '[object Object]';\n}\n\nexport function isArray<T = unknown>(value: any): value is T[] {\n  return Array.isArray(value);\n}\n\nexport function isDate(date: any): date is Date {\n  return _toString.call(date) === '[object Date]';\n}\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function isFunction<T extends Function>(value: any): value is T {\n  return typeof value === 'function';\n}\n","export function assert(condition: boolean, msg: string) {\n  if (!condition) {\n    throwError(msg);\n  }\n}\n\nexport function throwError(msg: string): void {\n  throw new Error(`[axios-miniprogram]: ${msg}`);\n}\n","import { isPlainObject } from './types';\n\nexport function ensureObject(value?: any) {\n  return isPlainObject(value) ? value : {};\n}\n","import { AxiosRequestData } from '../core/Axios';\nimport { ensureObject } from './ensureObject';\n\nconst dynamicRE = /\\/:([^/]+)/g;\nexport function dynamicURL(\n  url: string,\n  params: AnyObject = {},\n  data: AxiosRequestData = {},\n) {\n  const dataObject = ensureObject(data);\n  return url.replace(dynamicRE, (_, $2) => {\n    const value = params[$2] ?? dataObject[$2];\n    if ($2 in params) {\n      delete params[$2];\n    }\n    return `/${value}`;\n  });\n}\n","import { isPlainObject } from './types';\n\nexport function deepMerge<T extends AnyObject>(...objs: (T | undefined)[]): T {\n  const result: AnyObject = {};\n\n  for (const obj of objs.filter(isPlainObject) as T[]) {\n    for (const [key, val] of Object.entries(obj)) {\n      if (isPlainObject(val)) {\n        const rVal = result[key];\n        result[key] = isPlainObject(rVal)\n          ? deepMerge(rVal, val)\n          : deepMerge(val);\n      } else {\n        result[key] = val;\n      }\n    }\n  }\n\n  return result as T;\n}\n","/**\n * 忽略键值对\n *\n * @param obj 源对象\n * @param keys 忽略的键\n */\nexport function ignore<T extends AnyObject, K extends keyof T>(\n  obj: T,\n  ...keys: K[]\n): Omit<T, K> {\n  const res = { ...obj };\n  origIgnore(res, keys);\n  return res;\n}\n\n/**\n * 从源对象删除键值对\n *\n * @param obj 源对象\n * @param keys 忽略的键\n */\nexport function origIgnore(obj: AnyObject, keys: PropertyKey[]) {\n  for (const key of keys) {\n    delete obj[key as string | number];\n  }\n}\n","import {\n  PLAIN_METHODS,\n  WITH_DATA_METHODS,\n  WITH_PARAMS_METHODS,\n} from '../constants/methods';\nimport { deepMerge } from '../helpers/deepMerge';\nimport { ignore } from '../helpers/ignore';\nimport { AxiosRequestConfig, AxiosRequestHeaders } from '../core/Axios';\n\n/**\n * 通用请求头键\n */\nconst commonKey = 'common';\n/**\n * 需要忽略的键\n */\nconst ignoreKeys = [commonKey].concat(\n  PLAIN_METHODS,\n  WITH_PARAMS_METHODS,\n  WITH_DATA_METHODS,\n);\n\nexport function flattenHeaders(\n  config: AxiosRequestConfig,\n): AxiosRequestHeaders {\n  const headers = config.headers ?? {};\n  const mergedHeaders = deepMerge(\n    headers[commonKey],\n    headers[config.method!],\n    headers,\n  );\n  return ignore(mergedHeaders, ...ignoreKeys);\n}\n","import { isArray, isFunction } from '../helpers/types';\n\nexport interface AxiosTransformCallback<TData = unknown> {\n  (\n    /**\n     * 数据\n     */\n    data?: TData,\n    /**\n     * 头信息\n     */\n    headers?: AnyObject,\n  ): TData | undefined;\n}\n\nexport type AxiosTransformer<TData = unknown> =\n  | AxiosTransformCallback<TData>\n  | AxiosTransformCallback<TData>[];\n\nexport function transformData<TData = unknown>(\n  data?: TData,\n  headers?: AnyObject,\n  transforms?: AxiosTransformer<TData>,\n) {\n  if (!isArray(transforms)) {\n    if (isFunction(transforms)) {\n      transforms = [transforms];\n    } else {\n      transforms = [];\n    }\n  }\n\n  transforms.forEach((transform) => {\n    data = transform(data, headers);\n  });\n\n  return data as TData;\n}\n","import { isArray, isDate, isNull, isPlainObject, isUndefined } from './types';\n\nexport function buildURL(\n  url = '',\n  params: AnyObject = {},\n  paramsSerializer = defaultSerializer,\n): string {\n  const paramsStr = paramsSerializer(params);\n  if (paramsStr) {\n    url = `${url}${url.indexOf('?') === -1 ? '?' : '&'}${paramsStr}`;\n  }\n  return url;\n}\n\nfunction defaultSerializer(params: AnyObject): string {\n  const parts: string[] = [];\n\n  function push(key: string, value: string) {\n    parts.push(`${encode(key)}=${encode(value)}`);\n  }\n\n  for (const [key, val] of Object.entries(params)) {\n    if (!isNull(val) && !isUndefined(val) && val === val) {\n      if (isPlainObject(val)) {\n        for (const [k, v] of Object.entries(val)) push(`${key}[${k}]`, v);\n      } else if (isArray<string>(val)) {\n        const k = `${key}[]`;\n        for (const v of val) push(k, v);\n      } else if (isDate(val)) {\n        push(key, val.toISOString());\n      } else {\n        push(key, val);\n      }\n    }\n  }\n\n  return parts.join('&');\n}\n\nfunction encode(str: string): string {\n  return encodeURIComponent(str)\n    .replace(/%40/gi, '@')\n    .replace(/%3A/gi, ':')\n    .replace(/%24/g, '$')\n    .replace(/%2C/gi, ',')\n    .replace(/%20/g, '+')\n    .replace(/%5B/gi, '[')\n    .replace(/%5D/gi, ']');\n}\n","const absoluteRE = /^([a-z][\\w-.]*:)\\/\\//i;\nexport function isAbsoluteURL(url: string): boolean {\n  return absoluteRE.test(url);\n}\n","import { isAbsoluteURL } from './isAbsoluteURL';\n\nexport function combineURL(baseURL = '', url = ''): string {\n  if (!url) return baseURL;\n  if (isAbsoluteURL(url)) return url;\n  return `${baseURL.replace(/\\/+$/, '')}/${url.replace(/^\\/+/, '')}`;\n}\n","import { AxiosRequestConfig } from '../core/Axios';\nimport { buildURL } from './buildURL';\nimport { combineURL } from './combineURL';\n\nexport function transformURL(config: AxiosRequestConfig) {\n  const fullPath = combineURL(config.baseURL, config.url);\n  return buildURL(fullPath, config.params, config.paramsSerializer);\n}\n","import { AxiosRequestConfig } from '../core/Axios';\nimport { AxiosAdapterRequestType } from '../adpater/createAdapter';\n\nexport function generateType(config: AxiosRequestConfig) {\n  let requestType: AxiosAdapterRequestType = 'request';\n\n  if (config.download && /^GET/i.test(config.method!)) {\n    requestType = 'download';\n  } else if (config.upload && /^POST/i.test(config.method!)) {\n    requestType = 'upload';\n  }\n\n  return requestType;\n}\n","import { isFunction, isPlainObject } from '../helpers/types';\nimport { transformURL } from '../helpers/transformURL';\nimport {\n  AxiosRequestConfig,\n  AxiosResponse,\n  AxiosResponseError,\n} from '../core/Axios';\nimport {\n  AxiosAdapterRequestConfig,\n  AxiosAdapterResponse,\n  AxiosAdapterResponseError,\n  AxiosAdapterPlatformTask,\n  AxiosAdapterRequestMethod,\n} from '../adpater/createAdapter';\nimport { isCancelToken } from './cancel';\nimport { AxiosErrorResponse, createError } from './createError';\nimport { generateType } from './generateType';\n\n/**\n * 开始请求\n *\n * 创建适配器配置并调用适配器，监听取消请求，注册监听回调，处理响应体和错误体，抛出异常。\n *\n * @param config 请求配置\n */\nexport function request(config: AxiosRequestConfig) {\n  return new Promise<AxiosResponse>((resolve, reject) => {\n    const adapterConfig: AxiosAdapterRequestConfig = {\n      ...(config as AxiosAdapterRequestConfig),\n      type: generateType(config),\n      url: transformURL(config),\n      method: config.method!.toUpperCase() as AxiosAdapterRequestMethod,\n      success,\n      fail,\n    };\n\n    let adapterTask: AxiosAdapterPlatformTask;\n    try {\n      adapterTask = config.adapter!(adapterConfig);\n    } catch (err) {\n      fail({\n        status: 400,\n        statusText: 'Bad Adapter',\n      });\n\n      console.error(err);\n    }\n\n    function success(baseResponse: AxiosAdapterResponse): void {\n      const response = baseResponse as AxiosResponse;\n      response.status = response.status ?? 200;\n      response.statusText = response.statusText ?? 'OK';\n      response.headers = response.headers ?? {};\n      response.config = config;\n      response.request = adapterTask;\n\n      const { validateStatus } = config;\n      if (!isFunction(validateStatus) || validateStatus(response.status)) {\n        resolve(response);\n      } else {\n        catchError('validate status error', response);\n      }\n    }\n\n    function fail(baseResponseError: AxiosAdapterResponseError): void {\n      const responseError = baseResponseError as AxiosResponseError;\n      responseError.isFail = true;\n      responseError.status = responseError.status ?? 400;\n      responseError.statusText = responseError.statusText ?? 'Fail';\n      responseError.headers = responseError.headers ?? {};\n      responseError.config = config;\n      responseError.request = adapterTask;\n\n      catchError('request fail', responseError);\n    }\n\n    function catchError(\n      message: string,\n      errorResponse: AxiosErrorResponse,\n    ): void {\n      reject(createError(message, config, errorResponse, adapterTask));\n    }\n\n    if (isPlainObject(adapterTask)) {\n      tryToggleProgressUpdate(adapterConfig, adapterTask.onProgressUpdate);\n    }\n\n    const { cancelToken } = config;\n    if (isCancelToken(cancelToken)) {\n      cancelToken.onCancel((reason) => {\n        if (isPlainObject(adapterTask)) {\n          tryToggleProgressUpdate(adapterConfig, adapterTask.offProgressUpdate);\n\n          if (isFunction(adapterTask.abort)) {\n            adapterTask.abort();\n          }\n        }\n\n        reject(reason);\n      });\n    }\n  });\n}\n\nfunction tryToggleProgressUpdate(\n  config: AxiosAdapterRequestConfig,\n  toggle?: (cb: (event: AnyObject) => void) => void,\n) {\n  if (isFunction(toggle)) {\n    const { type, onUploadProgress, onDownloadProgress } = config;\n    switch (type) {\n      case 'upload':\n        if (isFunction(onUploadProgress)) {\n          toggle(onUploadProgress);\n        }\n        break;\n      case 'download':\n        if (isFunction(onDownloadProgress)) {\n          toggle(onDownloadProgress);\n        }\n        break;\n    }\n  }\n}\n","import { WITH_DATA_RE } from '../constants/methods';\nimport { isFunction, isString } from '../helpers/types';\nimport { assert } from '../helpers/error';\nimport { dynamicURL } from '../helpers/dynamicURL';\nimport { AxiosRequestConfig, AxiosResponse } from '../core/Axios';\nimport { Cancel, isCancel, isCancelToken } from './cancel';\nimport { flattenHeaders } from './flattenHeaders';\nimport { AxiosTransformer, transformData } from './transformData';\nimport { request } from './request';\nimport { AxiosErrorResponse } from './createError';\n\n/**\n * 发送请求\n *\n * 校验配置，转换配置，转换数据，捕获取消请求。\n *\n * @param config 请求配置\n */\nexport function dispatchRequest(config: AxiosRequestConfig) {\n  throwIfCancellationRequested(config);\n\n  assert(isFunction(config.adapter), 'adapter 不是一个 function');\n  assert(isString(config.url), 'url 不是一个 string');\n  assert(isString(config.method), 'method 不是一个 string');\n\n  config.url = dynamicURL(config.url!, config.params, config.data);\n  config.headers = flattenHeaders(config);\n\n  // 可以携带 data 的请求方法，转换 data\n  // 否则，删除 data\n  if (WITH_DATA_RE.test(config.method!)) {\n    dataTransformer(config, config.transformRequest);\n  } else {\n    delete config.data;\n  }\n\n  function onSuccess(response: AxiosResponse) {\n    throwIfCancellationRequested(config);\n    dataTransformer(response, config.transformResponse);\n\n    return response;\n  }\n\n  function onError(error: Cancel | AxiosErrorResponse) {\n    if (!isCancel(error)) {\n      throwIfCancellationRequested(config);\n      dataTransformer(error.response, config.transformResponse);\n    }\n\n    return Promise.reject(error);\n  }\n\n  function dataTransformer<TData = unknown>(\n    obj: { data?: TData; headers?: AnyObject },\n    fn?: AxiosTransformer<TData>,\n  ) {\n    obj.data = transformData(obj.data, obj.headers, fn);\n  }\n\n  return request(config).then(onSuccess, onError);\n}\n\nfunction throwIfCancellationRequested(config: AxiosRequestConfig) {\n  const { cancelToken } = config;\n  if (isCancelToken(cancelToken)) {\n    cancelToken.throwIfRequested();\n  }\n}\n","export interface InterceptorResolved<T = unknown> {\n  (value: T): T | Promise<T>;\n}\n\nexport interface InterceptorRejected<T = unknown> {\n  (error: unknown): T | Promise<T>;\n}\n\n/**\n * 拦截器\n */\nexport interface Interceptor<T = unknown> {\n  /**\n   * 成功的回调\n   */\n  resolved: InterceptorResolved<T>;\n  /**\n   * 失败的回调\n   */\n  rejected?: InterceptorRejected<T>;\n}\n\nexport interface InterceptorExecutor<T = unknown> {\n  (interceptor: Interceptor<T>): void;\n}\n\n/**\n * 拦截器管理器\n */\nexport default class InterceptorManager<T = unknown> {\n  /**\n   * 生成拦截器标识符\n   */\n  #id = 0;\n\n  /**\n   * 拦截器缓存池\n   */\n  #interceptors = new Map<number, Interceptor<T>>();\n\n  /**\n   * @internal\n   *\n   * 拦截器数量\n   */\n  get size() {\n    return this.#interceptors.size;\n  }\n\n  /**\n   * 添加拦截器\n   *\n   * @param resolved 成功的回调\n   * @param rejected 失败的回调\n   * @returns 拦截器标识符（可用于移除拦截器）\n   */\n  use(\n    resolved: InterceptorResolved<T>,\n    rejected?: InterceptorRejected<T>,\n  ): number {\n    this.#interceptors.set(++this.#id, {\n      resolved,\n      rejected,\n    });\n\n    return this.#id;\n  }\n\n  /**\n   * 移除拦截器\n   *\n   * @param id 拦截器标识符\n   */\n  eject(id: number): boolean {\n    return this.#interceptors.delete(id);\n  }\n\n  /**\n   * 清空拦截器\n   */\n  clear() {\n    this.#interceptors.clear();\n  }\n\n  /**\n   * @internal\n   *\n   * 遍历拦截器\n   *\n   * @param executor 执行器\n   */\n  forEach(executor: InterceptorExecutor<T>): void {\n    this.#interceptors.forEach(executor);\n  }\n}\n","import { assert } from '../helpers/error';\nimport { isFunction } from '../helpers/types';\nimport { AxiosRequestConfig, AxiosResponse } from './Axios';\n\nexport interface MiddlewareNext {\n  (): Promise<void>;\n}\n\n/**\n * 中间件上下文\n */\nexport interface MiddlewareContext {\n  /**\n   * 请求体\n   *\n   * 同于请求配置\n   */\n  req: AxiosRequestConfig;\n  /**\n   * 响应体\n   */\n  res: null | AxiosResponse;\n}\n\n/**\n * 中间件\n */\nexport interface MiddlewareCallback {\n  (ctx: MiddlewareContext, next: MiddlewareNext): Promise<void>;\n}\n\n/**\n * 中间件管理器\n */\nexport default class MiddlewareManager {\n  /**\n   * 中间件缓存池\n   */\n  #middlewares: MiddlewareCallback[] = [];\n\n  /**\n   * 注册中间件\n   */\n  use(middleware: MiddlewareCallback) {\n    assert(isFunction(middleware), 'middleware 不是一个 function');\n    this.#middlewares.push(middleware);\n  }\n\n  /**\n   * @internal\n   *\n   * 创建中间件上下文\n   */\n  createContext(config: AxiosRequestConfig): MiddlewareContext {\n    return {\n      req: config,\n      res: null,\n    };\n  }\n\n  /**\n   * @internal\n   *\n   * 运行中间件\n   *\n   * @param ctx 中间件上下文\n   * @param respond 目标函数\n   */\n  run(ctx: MiddlewareContext, respond: MiddlewareCallback) {\n    const middlewares = [...this.#middlewares, respond];\n    async function next() {\n      await middlewares.shift()!(ctx, next);\n    }\n    return next();\n  }\n\n  /**\n   * @internal\n   *\n   * 强化运行中间件\n   *\n   * @param enhancer 强化器\n   */\n  enhanceRun(enhancer: MiddlewareManager['run']): MiddlewareManager['run'] {\n    return (ctx, respond) => {\n      return enhancer(ctx, () => this.run(ctx, respond));\n    };\n  }\n}\n","import { isUndefined, isPlainObject } from '../helpers/types';\nimport { deepMerge } from '../helpers/deepMerge';\nimport { AxiosRequestConfig } from './Axios';\n\nconst fromConfig2Map: Record<string, boolean> = {\n  url: true,\n  data: true,\n  upload: true,\n  download: true,\n};\nconst deepMergeConfigMap: Record<string, boolean> = {\n  headers: true,\n  params: true,\n};\n\n/**\n * 合并配置\n *\n * 按照设定的优先级进行合并\n */\nexport function mergeConfig(\n  config1: AxiosRequestConfig = {},\n  config2: AxiosRequestConfig = {},\n) {\n  const config: AxiosRequestConfig = {};\n\n  // 所有已知键名\n  const keysSet = Array.from(\n    new Set([...Object.keys(config1), ...Object.keys(config2)]),\n  );\n\n  for (const key of keysSet) {\n    const val1 = config1[key];\n    const val2 = config2[key];\n\n    // 只从 config2 中取值\n    if (fromConfig2Map[key]) {\n      if (!isUndefined(val2)) config[key] = val2;\n    }\n    // 深度合并 config1 和 config2 中的对象\n    else if (deepMergeConfigMap[key]) {\n      if (isPlainObject(val1) && isPlainObject(val2)) {\n        config[key] = deepMerge(val1, val2);\n      } else if (isPlainObject(val2)) {\n        config[key] = val2;\n      } else if (isPlainObject(val1)) {\n        config[key] = val1;\n      }\n    }\n    // 优先从 config2 中取值，如果没有值就从 config1 中取值\n    else {\n      if (!isUndefined(val2)) {\n        config[key] = val2;\n      } else if (!isUndefined(val1)) {\n        config[key] = val1;\n      }\n    }\n  }\n\n  return config;\n}\n","import {\n  PLAIN_METHODS,\n  WITH_DATA_METHODS,\n  WITH_PARAMS_METHODS,\n} from '../constants/methods';\nimport { isString } from '../helpers/types';\nimport { dispatchRequest } from '../request/dispatchRequest';\nimport { CancelToken } from '../request/cancel';\nimport { AxiosTransformer } from '../request/transformData';\nimport { deepMerge } from '../helpers/deepMerge';\nimport {\n  AxiosAdapter,\n  AxiosAdapterRequestMethod,\n  AxiosAdapterPlatformTask,\n  AxiosAdapterRequestConfig,\n  AxiosAdapterResponseData,\n} from '../adpater/createAdapter';\nimport InterceptorManager, {\n  Interceptor,\n  InterceptorExecutor,\n} from './InterceptorManager';\nimport MiddlewareManager, {\n  MiddlewareCallback,\n  MiddlewareContext,\n} from './MiddlewareManager';\nimport { mergeConfig } from './mergeConfig';\n\n/**\n * 请求方法\n */\nexport type AxiosRequestMethod =\n  | AxiosAdapterRequestMethod\n  | 'options'\n  | 'get'\n  | 'head'\n  | 'post'\n  | 'put'\n  | 'patch'\n  | 'delete'\n  | 'trace'\n  | 'connect';\n\n/**\n * 请求头\n */\nexport interface AxiosRequestHeaders extends AnyObject {\n  /**\n   * 通用请求头\n   */\n  common?: AnyObject;\n  /**\n   * options 请求头\n   */\n  options?: AnyObject;\n  /**\n   * get 请求头\n   */\n  get?: AnyObject;\n  /**\n   * head 请求头\n   */\n  head?: AnyObject;\n  /**\n   * post 请求头\n   */\n  post?: AnyObject;\n  /**\n   * put 请求头\n   */\n  put?: AnyObject;\n  /**\n   * delete 请求头\n   */\n  delete?: AnyObject;\n  /**\n   * trace 请求头\n   */\n  trace?: AnyObject;\n  /**\n   * connect 请求头\n   */\n  connect?: AnyObject;\n}\n\n/**\n * 表单数据（上传会用到）\n */\nexport interface AxiosRequestFormData extends AnyObject {\n  /**\n   * 文件名\n   */\n  name: string;\n  /**\n   * 文件路径\n   */\n  filePath: string;\n}\n\n/**\n * 请求数据\n */\nexport type AxiosRequestData =\n  | string\n  | AnyObject\n  | ArrayBuffer\n  | AxiosRequestFormData;\n\n/**\n * 响应数据\n */\nexport type AxiosResponseData = number | AxiosAdapterResponseData;\n\n/**\n * 进度对象\n */\nexport interface AxiosProgressEvent extends AnyObject {\n  /**\n   * 上传进度百分比\n   */\n  progress: number;\n}\n\n/**\n * 下载进度对象\n */\nexport interface AxiosDownloadProgressEvent extends AxiosProgressEvent {\n  /**\n   * 已经下载的数据长度，单位 Bytes\n   */\n  totalBytesWritten: number;\n  /**\n   * 预预期需要下载的数据总长度，单位 Bytes\n   */\n  totalBytesExpectedToWrite: number;\n}\n\n/**\n * 监听下载进度\n */\nexport interface AxiosDownloadProgressCallback {\n  (event: AxiosDownloadProgressEvent): void;\n}\n\n/**\n * 上传进度对象\n */\nexport interface AxiosUploadProgressEvent extends AxiosProgressEvent {\n  /**\n   * 已经上传的数据长度，单位 Bytes\n   */\n  totalBytesSent: number;\n  /**\n   * 预期需要上传的数据总长度，单位 Bytes\n   */\n  totalBytesExpectedToSend: number;\n}\n\n/**\n * 监听上传进度\n */\nexport interface AxiosUploadProgressCallback {\n  (event: AxiosUploadProgressEvent): void;\n}\n\n/**\n * 请求配置\n */\nexport interface AxiosRequestConfig\n  extends Partial<\n    Omit<AxiosAdapterRequestConfig, 'type' | 'success' | 'fail'>\n  > {\n  /**\n   * 请求适配器\n   */\n  adapter?: AxiosAdapter;\n  /**\n   * 基础路径\n   */\n  baseURL?: string;\n  /**\n   * 请求的 URL\n   */\n  url?: string;\n  /**\n   * 请求参数\n   */\n  params?: AnyObject;\n  /**\n   * 请求数据\n   */\n  data?: AxiosRequestData;\n  /**\n   * 请求头\n   */\n  headers?: AxiosRequestHeaders;\n  /**\n   * 请求方法\n   */\n  method?: AxiosRequestMethod;\n  /**\n   * 取消令牌\n   */\n  cancelToken?: CancelToken;\n  /**\n   * 下载文件\n   */\n  download?: boolean;\n  /**\n   * 上传文件\n   */\n  upload?: boolean;\n  /**\n   * 请求参数系列化函数\n   */\n  paramsSerializer?: (params?: AnyObject) => string;\n  /**\n   * 校验状态码\n   */\n  validateStatus?: (status: number) => boolean;\n  /**\n   * 转换请求数据\n   */\n  transformRequest?: AxiosTransformer<AxiosRequestData>;\n  /**\n   * 转换响应数据\n   */\n  transformResponse?: AxiosTransformer<AxiosResponseData>;\n  /**\n   * 错误处理\n   */\n  errorHandler?: (error: unknown) => Promise<AxiosResponse>;\n  /**\n   * 监听下载进度\n   */\n  onDownloadProgress?: AxiosUploadProgressCallback;\n  /**\n   * 监听上传进度\n   */\n  onUploadProgress?: AxiosUploadProgressCallback;\n}\n\n/**\n * 响应体\n */\nexport interface AxiosResponse<\n  TData extends AxiosResponseData = AxiosResponseData,\n> extends AnyObject {\n  /**\n   * 状态码\n   */\n  status: number;\n  /**\n   * 状态字符\n   */\n  statusText: string;\n  /**\n   * 响应头\n   */\n  headers: AnyObject;\n  /**\n   * 响应数据\n   */\n  data: TData;\n  /**\n   * 请求配置\n   */\n  config: AxiosRequestConfig;\n  /**\n   * 请求任务\n   */\n  request?: AxiosAdapterPlatformTask;\n}\n\n/**\n * 错误体\n */\nexport interface AxiosResponseError extends AnyObject {\n  /**\n   * 状态码\n   */\n  status: number;\n  /**\n   * 状态字符\n   */\n  statusText: string;\n  /**\n   * 响应头\n   */\n  headers: AnyObject;\n  /**\n   * 错误数据\n   */\n  data: AnyObject;\n  /**\n   * 失败的请求，指没能够成功响应的请求\n   */\n  isFail: true;\n  /**\n   * 请求配置\n   */\n  config: AxiosRequestConfig;\n  /**\n   * 请求任务\n   */\n  request?: AxiosAdapterPlatformTask;\n}\n\nexport interface AxiosRequest {\n  <TData extends AxiosResponseData>(config: AxiosRequestConfig): Promise<\n    AxiosResponse<TData>\n  >;\n  <TData extends AxiosResponseData>(\n    url: string,\n    config?: AxiosRequestConfig,\n  ): Promise<AxiosResponse<TData>>;\n}\n\n/**\n * 普通的请求方法\n */\nexport type AxiosRequestMethodFn = <TData extends AxiosResponseData>(\n  url: string,\n  config?: AxiosRequestConfig,\n) => Promise<AxiosResponse<TData>>;\n\n/**\n * 带参数的请求方法\n */\nexport type AxiosRequestMethodFnWithParams = <TData extends AxiosResponseData>(\n  url: string,\n  params?: AnyObject,\n  config?: AxiosRequestConfig,\n) => Promise<AxiosResponse<TData>>;\n\n/**\n * 带数据的请求方法\n */\nexport type AxiosRequestMethodFnWithData = <TData extends AxiosResponseData>(\n  url: string,\n  data?: AxiosRequestData,\n  config?: AxiosRequestConfig,\n) => Promise<AxiosResponse<TData>>;\n\nexport interface AxiosDomainRequestHandler {\n  (config: AxiosRequestConfig): Promise<AxiosResponse>;\n}\n\n/**\n * Axios 构造函数\n */\nexport interface AxiosConstructor {\n  new (config: AxiosRequestConfig): Axios;\n}\n\nexport default class Axios {\n  /**\n   * 父级实例\n   */\n  #parent?: Axios;\n\n  /**\n   * 默认请求配置\n   */\n  defaults: AxiosRequestConfig;\n\n  /**\n   * 拦截器\n   */\n  interceptors = {\n    /**\n     * 请求拦截器\n     */\n    request: new InterceptorManager<AxiosRequestConfig>(),\n    /**\n     * 响应拦截器\n     */\n    response: new InterceptorManager<AxiosResponse>(),\n  };\n\n  /**\n   * 中间件\n   */\n  #middleware = new MiddlewareManager();\n\n  /**\n   * 发送 options 请求\n   */\n  options!: AxiosRequestMethodFn;\n\n  /**\n   * 发送 get 请求\n   */\n  get!: AxiosRequestMethodFnWithParams;\n\n  /**\n   * 发送 head 请求\n   */\n  head!: AxiosRequestMethodFnWithParams;\n\n  /**\n   * 发送 post 请求\n   */\n  post!: AxiosRequestMethodFnWithData;\n\n  /**\n   * 发送 put 请求\n   */\n  put!: AxiosRequestMethodFnWithData;\n\n  /**\n   * 发送 patch 请求\n   */\n  patch!: AxiosRequestMethodFnWithData;\n\n  /**\n   * 发送 delete 请求\n   */\n  delete!: AxiosRequestMethodFnWithParams;\n\n  /**\n   * 发送 trace 请求\n   */\n  trace!: AxiosRequestMethodFn;\n\n  /**\n   * 发送 connect 请求\n   */\n  connect!: AxiosRequestMethodFn;\n\n  /**\n   *\n   * @param config 默认配置\n   * @param parent 父级实例\n   */\n  constructor(config: AxiosRequestConfig, parent?: Axios) {\n    this.defaults = config;\n    this.#parent = parent;\n  }\n\n  /**\n   * 发送请求\n   */\n  request: AxiosRequest = (\n    urlOrConfig: string | AxiosRequestConfig,\n    config: AxiosRequestConfig = {},\n  ) => {\n    if (isString(urlOrConfig)) {\n      config.url = urlOrConfig;\n    } else {\n      config = urlOrConfig;\n    }\n    config = mergeConfig(this.defaults, config);\n    config.method = (config.method?.toLowerCase() ??\n      'get') as AxiosRequestMethod;\n\n    const requestHandler = {\n      resolved: this.#handleRequest,\n    };\n    const errorHandler = {\n      rejected: config.errorHandler,\n    };\n    const chain: (\n      | Partial<Interceptor<AxiosRequestConfig>>\n      | Partial<Interceptor<AxiosResponse>>\n    )[] = [];\n\n    this.#eachRequestInterceptors((requestInterceptor) => {\n      chain.unshift(requestInterceptor);\n    });\n    chain.push(requestHandler);\n    this.#eachResponseInterceptors((responseInterceptor) => {\n      chain.push(responseInterceptor);\n    });\n    chain.push(errorHandler);\n\n    return chain.reduce(\n      (next, { resolved, rejected }) =>\n        next.then(\n          // @ts-ignore\n          resolved,\n          rejected,\n        ),\n      Promise.resolve(config),\n    ) as Promise<AxiosResponse>;\n  };\n\n  #eachRequestInterceptors(executor: InterceptorExecutor<AxiosRequestConfig>) {\n    this.interceptors.request.forEach(executor);\n    if (this.#parent) {\n      this.#parent.#eachRequestInterceptors(executor);\n    }\n  }\n\n  #eachResponseInterceptors(executor: InterceptorExecutor<AxiosResponse>) {\n    this.interceptors.response.forEach(executor);\n    if (this.#parent) {\n      this.#parent.#eachResponseInterceptors(executor);\n    }\n  }\n\n  /**\n   * 注册中间件\n   *\n   * 示例1：注册一个中间件\n   * ```ts\n   * axios.use(async function middleware(ctx, next) {\n   *   console.log(ctx.req);\n   *   await next();\n   *   console.log(ctx.res);\n   * });\n   * ```\n   *\n   * 示例2：链式注册多个中间件\n   * ```ts\n   * axios\n   *  .use(async function middleware1(ctx, next) {\n   *    console.log(ctx.req);\n   *    await next();\n   *    console.log(ctx.res);\n   *  })\n   *  .use(async function middleware2(ctx, next) {\n   *    console.log(ctx.req);\n   *    await next();\n   *    console.log(ctx.res);\n   *  });\n   * ```\n   */\n  use = (middleware: MiddlewareCallback) => {\n    this.#middleware.use(middleware);\n    return this;\n  };\n\n  #handleRequest = async (config: AxiosRequestConfig) => {\n    const ctx = this.#middleware.createContext(config);\n    await this.#run(ctx, this.#handleResponse);\n    return ctx.res as AxiosResponse;\n  };\n\n  #handleResponse = async (ctx: MiddlewareContext) => {\n    ctx.res = await dispatchRequest(ctx.req);\n  };\n\n  #run = (\n    ctx: MiddlewareContext,\n    respond: MiddlewareCallback,\n  ): Promise<void> => {\n    if (!this.#parent) {\n      return this.#middleware.run(ctx, respond);\n    }\n    return this.#middleware.enhanceRun(this.#parent.#run)(ctx, respond);\n  };\n}\n\nfor (const method of PLAIN_METHODS) {\n  Axios.prototype[method] = function processRequestMethod(url, config = {}) {\n    config.method = method;\n    return this.request(url, config);\n  };\n}\n\nfor (const method of WITH_PARAMS_METHODS) {\n  Axios.prototype[method] = function processRequestMethodWithParams(\n    url,\n    params,\n    config = {},\n  ) {\n    config.method = method;\n    config.params = deepMerge(params, config.params);\n    return this.request(url, config);\n  };\n}\n\nfor (const method of WITH_DATA_METHODS) {\n  Axios.prototype[method] = function processRequestMethodWithData(\n    url,\n    data,\n    config = {},\n  ) {\n    config.method = method;\n    config.data = data;\n    return this.request(url, config);\n  };\n}\n","import { dynamicURL } from '../helpers/dynamicURL';\nimport { combineURL } from '../helpers/combineURL';\nimport { transformURL } from '../helpers/transformURL';\nimport Axios, {\n  AxiosRequest,\n  AxiosRequestConfig,\n  AxiosRequestHeaders,\n} from './Axios';\nimport { mergeConfig } from './mergeConfig';\n\n/**\n * axios 实例默认配置\n */\nexport interface AxiosInstanceDefaults extends AxiosRequestConfig {\n  /**\n   * 请求头\n   */\n  headers: Required<AxiosRequestHeaders>;\n}\n\n/**\n * axios 实例\n */\nexport interface AxiosInstance extends AxiosRequest, Axios {\n  /**\n   * 默认请求配置\n   */\n  defaults: AxiosInstanceDefaults;\n  /**\n   * 获取 URI\n   *\n   * @param config 配置\n   */\n  getUri(config: AxiosRequestConfig): string;\n  /**\n   * 创建实例\n   *\n   * @param config 默认配置\n   */\n  create(config?: AxiosRequestConfig): AxiosInstance;\n  /**\n   * 扩展实例\n   *\n   * @param config 默认配置\n   */\n  extend(config: AxiosRequestConfig): AxiosInstance;\n  /**\n   * 派生领域\n   *\n   * @param config 默认配置\n   *\n   * @deprecated 请使用 extend 替换 fork\n   */\n  fork(config: AxiosRequestConfig): AxiosInstance;\n}\n\nexport function createInstance(\n  defaults: AxiosRequestConfig,\n  parentContext?: Axios,\n) {\n  const context = new Axios(defaults, parentContext);\n  const instance = context.request as AxiosInstance;\n\n  instance.getUri = function getUri(config) {\n    config.url = dynamicURL(config.url!, config.params, config.data);\n    return transformURL(mergeConfig(defaults, config));\n  };\n  instance.create = function create(config) {\n    return createInstance(mergeConfig(defaults, config));\n  };\n  instance.extend = function extend(config) {\n    config.baseURL = combineURL(defaults.baseURL, config.baseURL);\n    return createInstance(mergeConfig(defaults, config), context);\n  };\n  instance.fork = instance.extend;\n\n  Object.assign(instance, context);\n  Object.setPrototypeOf(instance, Axios.prototype);\n\n  return instance;\n}\n","import { isFunction, isPlainObject } from '../helpers/types';\nimport { assert } from '../helpers/error';\nimport { origIgnore } from '../helpers/ignore';\nimport {\n  AxiosProgressEvent,\n  AxiosRequestFormData,\n  AxiosRequestHeaders,\n} from '../core/Axios';\n\n/**\n * 适配器请求类型\n */\nexport type AxiosAdapterRequestType = 'request' | 'download' | 'upload';\n\n/**\n * 适配器请求方法\n */\nexport type AxiosAdapterRequestMethod =\n  | 'OPTIONS'\n  | 'GET'\n  | 'HEAD'\n  | 'POST'\n  | 'PUT'\n  | 'PATCH'\n  | 'DELETE'\n  | 'TRACE'\n  | 'CONNECT';\n\n/**\n * 适配器请求数据\n */\nexport type AxiosAdapterRequestData = string | AnyObject | ArrayBuffer;\n\n/**\n * 适配器响应数据\n */\nexport type AxiosAdapterResponseData = string | ArrayBuffer | AnyObject;\n\n/**\n * 适配器响应体\n */\nexport interface AxiosAdapterResponse extends AnyObject {\n  /**\n   * 状态码\n   */\n  status?: number;\n  /**\n   * 状态字符\n   */\n  statusText?: string;\n  /**\n   * 响应头\n   */\n  headers?: AnyObject;\n  /**\n   * 响应数据\n   */\n  data: AxiosAdapterResponseData;\n}\n\n/**\n * 适配器错误体\n */\nexport interface AxiosAdapterResponseError extends AnyObject {\n  /**\n   * 状态码\n   */\n  status?: number;\n  /**\n   * 状态字符\n   */\n  statusText?: string;\n  /**\n   * 响应头\n   */\n  headers?: AnyObject;\n  /**\n   * 错误数据\n   */\n  data?: AnyObject;\n}\n\n/**\n * 适配器请求配置\n */\nexport interface AxiosAdapterRequestConfig extends AnyObject {\n  /**\n   * 请求类型\n   */\n  type: 'request' | 'upload' | 'download';\n  /**\n   * 开发者服务器接口地址\n   */\n  url: string;\n  /**\n   * HTTP 请求方法\n   */\n  method: AxiosAdapterRequestMethod;\n  /**\n   * 请求参数\n   */\n  params?: AnyObject;\n  /**\n   * 请求数据\n   */\n  data?: AxiosAdapterRequestData;\n  /**\n   * 请求头\n   */\n  headers?: AnyObject;\n  /**\n   * 返回的数据格式\n   */\n  dataType?: 'json' | '其他';\n  /**\n   * 响应的数据类型\n   */\n  responseType?: 'text' | 'arraybuffer';\n  /**\n   * 超时时间，单位为毫秒。默认值为 60000\n   */\n  timeout?: number;\n  /**\n   * 成功的回调\n   */\n  success(response: AxiosAdapterResponse): void;\n  /**\n   * 失败的回调\n   */\n  fail(error: AxiosAdapterResponseError): void;\n}\n\n/**\n * 请求函数基本选项\n */\nexport interface AxiosAdapterBaseOptions extends AxiosAdapterRequestConfig {\n  /**\n   * 请求头，同 headers\n   */\n  header?: AxiosRequestHeaders;\n  /**\n   * 成功的回调\n   */\n  success(response: AnyObject): void;\n  /**\n   * 失败的回调\n   */\n  fail(error: AnyObject): void;\n}\n\n/**\n * 请求函数选项\n */\nexport type AxiosAdapterRequestOptions = AxiosAdapterBaseOptions;\n\n/**\n * 下载函数选项\n */\nexport interface AxiosAdapterDownloadOptions extends AxiosAdapterBaseOptions {\n  /**\n   * 文件下载后存储的路径\n   */\n  filePath?: string;\n}\n\n/**\n * 上传函数选项\n */\nexport interface AxiosAdapterUploadOptions\n  extends AxiosAdapterBaseOptions,\n    AxiosRequestFormData {\n  /**\n   * [钉钉小程序用 fileName 代替 name](https://open.dingtalk.com/document/orgapp/dd-upload-objects#title-ngk-rr1-eow)\n   */\n  fileName: string;\n  /**\n   * 钉钉小程序|支付宝小程序特有参数\n   */\n  fileType?: 'image' | 'video' | 'audie';\n  /**\n   * 额外的数据\n   */\n  formData?: AnyObject;\n}\n\n/**\n * 请求函数\n */\nexport interface AxiosAdapterRequest {\n  (config: AxiosAdapterRequestOptions): AxiosAdapterPlatformTask;\n}\n\n/**\n * 下载函数\n */\nexport interface AxiosAdapterDownload {\n  (config: AxiosAdapterDownloadOptions): AxiosAdapterPlatformTask;\n}\n\n/**\n * 上传函数\n */\nexport interface AxiosAdapterUpload {\n  (config: AxiosAdapterUploadOptions): AxiosAdapterPlatformTask;\n}\n\n/**\n * 适配器平台\n */\nexport interface AxiosAdapterPlatform {\n  /**\n   * 发送请求\n   */\n  request: AxiosAdapterRequest;\n  /**\n   * 下载文件\n   */\n  download: AxiosAdapterDownload;\n  /**\n   * 上传文件\n   */\n  upload: AxiosAdapterUpload;\n}\n\n/**\n * 适配器平台请求任务\n */\nexport type AxiosAdapterPlatformTask =\n  | undefined\n  | void\n  | {\n      abort?(): void;\n      onProgressUpdate?(callback: (event: AxiosProgressEvent) => void): void;\n      offProgressUpdate?(callback: (event: AxiosProgressEvent) => void): void;\n    };\n\n/**\n * 适配器函数\n */\nexport interface AxiosAdapter {\n  (config: AxiosAdapterRequestConfig): AxiosAdapterPlatformTask;\n}\n\n/**\n * 创建适配器\n *\n * @param platform 平台 API 对象\n */\nexport function createAdapter(platform: AxiosAdapterPlatform) {\n  assert(isPlainObject(platform), 'platform 不是一个 object');\n  assert(isFunction(platform.request), 'request 不是一个 function');\n  assert(isFunction(platform.upload), 'upload 不是一个 function');\n  assert(isFunction(platform.download), 'download 不是一个 function');\n\n  function adapter(\n    config: AxiosAdapterRequestConfig,\n  ): AxiosAdapterPlatformTask {\n    const options = transformOptions(config);\n    switch (config.type) {\n      case 'request':\n        return processRequest(platform.request, options);\n      case 'download':\n        return processDownload(platform.download, options);\n      case 'upload':\n        return processUpload(platform.upload, options);\n    }\n  }\n\n  function transformOptions(\n    config: AxiosAdapterRequestConfig,\n  ): AxiosAdapterBaseOptions {\n    return {\n      ...config,\n      header: config.headers,\n      success(response: AxiosAdapterResponse) {\n        transformResponse(response);\n        config.success(response);\n      },\n      fail(responseError: AxiosAdapterResponseError) {\n        responseError.data = {\n          errMsg: responseError.errMsg,\n          errno: responseError.errno,\n        };\n        transformResponse(responseError);\n        config.fail(responseError);\n      },\n    };\n  }\n\n  function transformResponse(\n    response: AxiosAdapterResponse | AxiosAdapterResponseError,\n  ) {\n    response.status = response.status ?? response.statusCode;\n    response.headers = response.headers ?? response.header;\n\n    origIgnore(response, ['statusCode', 'errMsg', 'errno', 'header']);\n  }\n\n  function processRequest(\n    request: AxiosAdapterRequest,\n    baseOptions: AxiosAdapterBaseOptions,\n  ): AxiosAdapterPlatformTask {\n    return request(baseOptions);\n  }\n\n  function processUpload(\n    upload: AxiosAdapterUpload,\n    baseOptions: AxiosAdapterBaseOptions,\n  ): AxiosAdapterPlatformTask {\n    const options = baseOptions as AxiosAdapterUploadOptions;\n    const { name, filePath, fileType, ...formData } = options.data as AnyObject;\n    options.name = name;\n    options.fileName = name;\n    options.filePath = filePath;\n    options.fileType = fileType;\n    options.formData = formData;\n\n    origIgnore(options, ['params', 'data']);\n\n    return upload(options);\n  }\n\n  function processDownload(\n    download: AxiosAdapterDownload,\n    baseOptions: AxiosAdapterBaseOptions,\n  ): AxiosAdapterPlatformTask {\n    const options = baseOptions as AxiosAdapterDownloadOptions;\n    const { params, success } = options;\n    options.filePath = params?.filePath;\n    options.success = (response) => {\n      response.data = {\n        filePath: response.filePath,\n        tempFilePath:\n          response.tempFilePath ||\n          // response.apFilePath 为支付宝小程序基础库小于 2.7.23 的特有属性。\n          response.apFilePath,\n      };\n\n      origIgnore(response, ['tempFilePath', 'apFilePath', 'filePath']);\n\n      success(response);\n    };\n\n    origIgnore(options, ['params']);\n\n    return download(options);\n  }\n\n  return adapter;\n}\n","import { isFunction, isPlainObject } from '../helpers/types';\nimport { AxiosAdapterPlatform, createAdapter } from './createAdapter';\n\n/**\n * 获取支持的平台适配器\n */\nexport function getDefaultAdapter() {\n  const platform = revisePlatformApiNames(getPlatform());\n  if (!isPlatform(platform)) {\n    return;\n  }\n\n  function getPlatform() {\n    const undef = 'undefined';\n\n    if (typeof wx !== undef) {\n      return wx;\n    } else if (typeof my !== undef) {\n      return my;\n    } else if (typeof swan !== undef) {\n      return swan;\n    } else if (typeof tt !== undef) {\n      return tt;\n    } else if (typeof qq !== undef) {\n      return qq;\n    } else if (typeof qh !== undef) {\n      return qh;\n    } else if (typeof ks !== undef) {\n      return ks;\n    } else if (typeof dd !== undef) {\n      return dd;\n    } else if (typeof jd !== undef) {\n      return jd;\n    }\n  }\n\n  function revisePlatformApiNames(platform?: AnyObject) {\n    return (\n      platform && {\n        request: platform.request ?? platform.httpRequest,\n        upload: platform.upload ?? platform.uploadFile,\n        download: platform.download ?? platform.downloadFile,\n      }\n    );\n  }\n\n  function isPlatform(value: any): value is AxiosAdapterPlatform {\n    return (\n      isPlainObject(value) &&\n      isFunction(value.request) &&\n      isFunction(value.upload) &&\n      isFunction(value.download)\n    );\n  }\n\n  return createAdapter(platform);\n}\n","import { getDefaultAdapter } from './adpater/getDefaultAdapter';\nimport { AxiosInstanceDefaults } from './core/createInstance';\n\nconst defaults: AxiosInstanceDefaults = {\n  // 适配器，在支持的平台中有值。\n  // 对于不支持平台而言，此值始终为 undefined，需要您手动适配。\n  adapter: getDefaultAdapter(),\n\n  // 请求头\n  headers: {\n    // 通用请求头\n    common: {\n      Accept: 'application/json, text/plain, */*',\n    },\n    options: {}, // OPTIONS 方法请求头\n    get: {}, // GET 方法请求头\n    head: {}, // HEAD 方法请求头\n    post: {}, // POST 方法请求头\n    put: {}, // PUT 方法请求头\n    patch: {}, // PATCH 方法请求头\n    delete: {}, // DELETE 方法请求头\n    trace: {}, // TRACE 方法请求头\n    connect: {}, // CONNECT 方法请求头\n  },\n\n  // 校验状态码\n  validateStatus(status: number): boolean {\n    return status >= 200 && status < 300;\n  },\n\n  // 返回的数据格式\n  dataType: 'json',\n\n  // 响应的数据类型\n  responseType: 'text',\n\n  // 超时时长\n  timeout: 10000,\n};\n\nexport default defaults;\n","export const version = '2.5.0';\n","import {\n  CancelToken,\n  CancelTokenConstructor,\n  isCancel,\n} from './request/cancel';\nimport { isAxiosError } from './request/createError';\nimport Axios, { AxiosConstructor } from './core/Axios';\nimport { AxiosInstance, createInstance } from './core/createInstance';\nimport { createAdapter } from './adpater/createAdapter';\nimport defaults from './defaults';\nimport { version } from './version';\n\n/**\n * axios 静态对象\n */\nexport interface AxiosStatic extends AxiosInstance {\n  /**\n   * 版本号\n   */\n  version: string;\n  /**\n   * Axios 类\n   */\n  Axios: AxiosConstructor;\n  /**\n   * 取消令牌\n   */\n  CancelToken: CancelTokenConstructor;\n  /**\n   * 创建适配器\n   */\n  createAdapter: typeof createAdapter;\n  /**\n   * 传入取消请求错误返回 true\n   */\n  isCancel: typeof isCancel;\n  /**\n   * 传入响应错误返回 true\n   */\n  isAxiosError: typeof isAxiosError;\n}\n\nconst axios = createInstance(defaults) as AxiosStatic;\naxios.version = version;\naxios.Axios = Axios;\naxios.CancelToken = CancelToken;\naxios.createAdapter = createAdapter;\naxios.isCancel = isCancel;\naxios.isAxiosError = isAxiosError;\n\nexport default axios;\n"],"names":["a","n","t","s","i","l","_reason","Cancel","message","isCancel","value","_CancelToken","executor","__privateAdd","action","promise","resolve","__privateGet","__privateSet","cancel","CancelToken","isCancelToken","i$2","config","response","request","createError","AxiosError","isAxiosError","PLAIN_METHODS","WITH_PARAMS_METHODS","WITH_DATA_METHODS","WITH_DATA_RE","_toString","isNull","isUndefined","isString","isPlainObject","isArray","isDate","date","isFunction","assert","condition","msg","throwError","ensureObject","dynamicRE","dynamicURL","url","params","data","dataObject","_","$2","_a","deepMerge","objs","result","obj","key","val","rVal","ignore","keys","res","__spreadValues","origIgnore","commonKey","ignoreKeys","flattenHeaders","headers","mergedHeaders","transformData","transforms","transform","buildURL","paramsSerializer","defaultSerializer","paramsStr","parts","push","encode","k","v","str","absoluteRE","isAbsoluteURL","combineURL","baseURL","transformURL","fullPath","generateType","requestType","E","P","m","b","R","e","o","q","reject","adapterConfig","__spreadProps","success","fail","adapterTask","err","baseResponse","_b","_c","validateStatus","catchError","baseResponseError","responseError","errorResponse","tryToggleProgressUpdate","cancelToken","reason","toggle","type","onUploadProgress","onDownloadProgress","dispatchRequest","throwIfCancellationRequested","dataTransformer","onSuccess","onError","error","fn","r","p","u","T","_id","_interceptors","d$1","resolved","rejected","__privateWrapper","id","_middlewares","m$1","middleware","ctx","respond","middlewares","next","__async","enhancer","fromConfig2Map","deepMergeConfigMap","mergeConfig","config1","config2","keysSet","val1","val2","_parent","_middleware","_eachRequestInterceptors","eachRequestInterceptors_fn","_eachResponseInterceptors","eachResponseInterceptors_fn","_handleRequest","_handleResponse","_run","Axios","parent","InterceptorManager","MiddlewareManager","urlOrConfig","requestHandler","errorHandler","chain","__privateMethod","requestInterceptor","responseInterceptor","method","createInstance","defaults","parentContext","context","instance","g","D","j","O","y","createAdapter","platform","adapter","options","transformOptions","processRequest","processDownload","processUpload","transformResponse","baseOptions","upload","name","filePath","fileType","formData","__objRest","download","getDefaultAdapter","revisePlatformApiNames","getPlatform","isPlatform","undef","status","version","axios"],"mappings":"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"}